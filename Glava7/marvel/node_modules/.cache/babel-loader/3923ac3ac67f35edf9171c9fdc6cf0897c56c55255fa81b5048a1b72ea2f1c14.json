{"ast":null,"code":"import _regeneratorRuntime from\"C:/OSPanel/domains/Project1-master/Glava7/marvel/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/OSPanel/domains/Project1-master/Glava7/marvel/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _createClass from\"C:/OSPanel/domains/Project1-master/Glava7/marvel/node_modules/@babel/runtime/helpers/esm/createClass.js\";import _classCallCheck from\"C:/OSPanel/domains/Project1-master/Glava7/marvel/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";var MarvelService=/*#__PURE__*/_createClass(function MarvelService(){var _this=this;_classCallCheck(this,MarvelService);this._apiBase='https://gateway.marvel.com:443/v1/public/';//Публичный ключ\nthis._apiKey='apikey=8103cc505b6b5e5219ef39595582bbe3';this._baseOffset=210;this.getResource=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(url){var res;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(url);case 2:res=_context.sent;if(res.ok){_context.next=5;break;}throw new Error(\"Could not fetch \".concat(url,\", status: \").concat(res.status));case 5:_context.next=7;return res.json();case 7:return _context.abrupt(\"return\",_context.sent);case 8:case\"end\":return _context.stop();}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();this.getAllCharacters=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var offset,res,_args2=arguments;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:offset=_args2.length>0&&_args2[0]!==undefined?_args2[0]:_this._baseOffset;_context2.next=3;return _this.getResource(\"\".concat(_this._apiBase,\"characters?limit=9&offset=\").concat(offset,\"&\").concat(_this._apiKey));case 3:res=_context2.sent;return _context2.abrupt(\"return\",res.data.results.map(_this._transformCharacter));case 5:case\"end\":return _context2.stop();}},_callee2);}));this.getCharacter=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(id){var res;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.next=2;return _this.getResource(\"\".concat(_this._apiBase,\"characters/\").concat(id,\"?\").concat(_this._apiKey));case 2:res=_context3.sent;return _context3.abrupt(\"return\",_this._transformCharacter(res.data.results[0]));case 4:case\"end\":return _context3.stop();}},_callee3);}));return function(_x2){return _ref3.apply(this,arguments);};}();this._transformCharacter=function(char){return{id:char.id,name:char.name,description:char.description?\"\".concat(char.description.slice(0,210),\"...\"):'There is no description for this character',thumbnail:char.thumbnail.path+'.'+char.thumbnail.extension,homepage:char.urls[0].url,wiki:char.urls[1].url,comics:char.comics.items};};});export default MarvelService;","map":{"version":3,"names":["MarvelService","_createClass","_this","_classCallCheck","_apiBase","_apiKey","_baseOffset","getResource","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","url","res","wrap","_callee$","_context","prev","next","fetch","sent","ok","Error","concat","status","json","abrupt","stop","_x","apply","arguments","getAllCharacters","_callee2","offset","_args2","_callee2$","_context2","length","undefined","data","results","map","_transformCharacter","getCharacter","_ref3","_callee3","id","_callee3$","_context3","_x2","char","name","description","slice","thumbnail","path","extension","homepage","urls","wiki","comics","items"],"sources":["C:/OSPanel/domains/Project1-master/Glava7/marvel/src/services/MarvelService.js"],"sourcesContent":["\r\n\r\nclass MarvelService {\r\n    _apiBase = 'https://gateway.marvel.com:443/v1/public/';\r\n    //Публичный ключ\r\n    _apiKey = 'apikey=8103cc505b6b5e5219ef39595582bbe3';\r\n    _baseOffset = 210;\r\n\r\n    getResource = async (url) => {\r\n        let res = await fetch(url);\r\n    \r\n        if (!res.ok) {\r\n            throw new Error(`Could not fetch ${url}, status: ${res.status}`);\r\n        }\r\n    \r\n        return await res.json();\r\n    }\r\n\r\n    getAllCharacters = async (offset = this._baseOffset) => {\r\n        const res = await this.getResource(`${this._apiBase}characters?limit=9&offset=${offset}&${this._apiKey}`);\r\n        return res.data.results.map(this._transformCharacter);\r\n    }\r\n\r\n    getCharacter = async (id) => {\r\n        const res = await this.getResource(`${this._apiBase}characters/${id}?${this._apiKey}`);\r\n        return this._transformCharacter(res.data.results[0]);\r\n    }\r\n\r\n    _transformCharacter = (char) => {\r\n        return {\r\n            id: char.id,\r\n            name: char.name,\r\n            description: char.description ? `${char.description.slice(0, 210)}...` : 'There is no description for this character',\r\n            thumbnail: char.thumbnail.path + '.' + char.thumbnail.extension,\r\n            homepage: char.urls[0].url,\r\n            wiki: char.urls[1].url,\r\n            comics: char.comics.items\r\n        }\r\n    }\r\n}\r\n\r\nexport default MarvelService;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}